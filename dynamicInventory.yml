---
import yaml
import pymysql

# Подключение к базе данных
connection = pymysql.connect(host='database_host',
                             user='username',
                             password='password',
                             db='inventory_db')

cursor = connection.cursor()

# Запрос для получения информации о серверах
cursor.execute("SELECT hostname, ip_address FROM servers")
servers = cursor.fetchall()

# Создание словаря для инвентаря
inventory = {
    'all': {
        'hosts': {}
    }
}

# Добавление серверов в инвентарь
for server in servers:
    inventory['all']['hosts'][server[0]] = {
       'ansible_host': server[1]
    }

# Запись инвентаря в файл inventory.yml
with open('inventory.yml', 'w') as file:
    file.write(yaml.dump(inventory, default_flow_style=False))

cursor.close()
connection.close()

#starting - cron job
...